<!doctype HTML>
<html>
<head>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://cdn.rawgit.com/jeromeetienne/ar.js/2.0.1/aframe/build/aframe-ar.min.js"></script>
</head>
<body style='margin: 0px; overflow: hidden;'>
  <a-scene embedded arjs>
    <a-marker preset="hiro" id="animatedMarker">
      <a-box 
        position="0 0.5 0" 
        color="red" 
        id="rotatingBox" 
        material="opacity: 0.5; transparent: true;">
      </a-box>
    </a-marker>

    <a-entity camera></a-entity>
  </a-scene>

  <script>
    const marker = document.querySelector('#animatedMarker');
    const rotatingBox = document.querySelector('#rotatingBox');

    function startAnimation() {
      rotatingBox.setAttribute('animation', {
        property: 'rotation',
        to: '0 360 0',
        dur: 2000,
        easing: 'linear',
        loop: true
      });
    }

    function stopAnimation() {
      rotatingBox.removeAttribute('animation');
    }

    marker.addEventListener('markerFound', startAnimation);
    marker.addEventListener('markerLost', stopAnimation);
  </script>
</body>
</html>
